(this["webpackJsonptfjs-mobilenetv2-od"]=this["webpackJsonptfjs-mobilenetv2-od"]||[]).push([[0],{275:function(e,t,n){},277:function(e,t,n){},282:function(e,t){},283:function(e,t){},291:function(e,t){},301:function(e,t){},302:function(e,t){},303:function(e,t){},304:function(e,t){},312:function(e,t){},314:function(e,t,n){"use strict";n.r(t);var o=n(80),r=n.n(o),c=n(246),i=n.n(c),a=(n(275),n(11)),s=n(5),u=n(4),l=n.n(u),f=(n(277),n(92)),d=n(269),b=n.n(d),h=(n.p,n(90)),v={height:1080,width:1920,maxWidth:"100vw",facingMode:"environment"},p=function(e,t,n,o,r,c){var i=[];return e.forEach((function(e,a){if(e>t){var s=[],u=n[0][a][0]*r,l=n[0][a][1]*c,f=n[0][a][2]*r,d=n[0][a][3]*c;s[0]=l,s[1]=u,s[2]=d-l,s[3]=f-u,i.push({class:o[a],label:"face",score:e.toFixed(4),bbox:s})}})),i};var x=function(){var e=Object(o.useRef)(null),t=Object(o.useState)(null),n=Object(s.a)(t,2),r=(n[0],n[1]),c=Object(o.useState)(960),i=Object(s.a)(c,2),u=i[0],d=(i[1],Object(o.useState)(640)),x=Object(s.a)(d,2),j=x[0],g=(x[1],function(){var e=Object(a.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.d("tfjs/face_detection/model.json");case 2:return t=e.sent,r(t),console.log("Model loaded."),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),y=function(){var t=Object(a.a)(l.a.mark((function t(n){var o,r,c,i,a,s,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"undefined"!==typeof e.current&&null!==e.current&&4===e.current.video.readyState&&null!==n&&(o=e.current.video,r=o.videoWidth,c=o.videoHeight,e.current.video.width=r,e.current.video.height=c,(i=document.getElementById("myCanvas")).width=r,i.height=c,a=i.getContext("2d"),s="16px sans-serif",a.font=s,a.textBaseline="top",u=f.a.fromPixels(o),d=f.f((function(){return u.transpose([0,1,2]).expandDims()})),performance.now(),n.executeAsync(d).then((function(t){var n=t[4].arraySync(),o=t[5].arraySync(),i=t[6].dataSync(),u=p(i,.5,n,o,c,r);return a.clearRect(0,0,e.current.video.videoWidth,e.current.video.videoHeight),u.forEach((function(e){var t=e.bbox[0],n=e.bbox[1],o=e.bbox[2],r=e.bbox[3];a.strokeStyle="#00FFFF",a.lineWidth=4,a.strokeRect(t,n,o,r),a.fillStyle="#00FFFF";var c=a.measureText(e.label+" "+(100*e.score).toFixed(2)+"%").width,i=parseInt(s,10);a.fillRect(t,n,c+4,i+4)})),u.forEach((function(e){var t=e.bbox[0],n=e.bbox[1];a.fillStyle="#000000",a.fillText(e.label+" "+(100*e.score).toFixed(2)+"%",t,n)})),t})).then((function(e){for(var t=0,n=e.length;t<n;)f.b(e[t]),t++})).finally((function(){f.b(u),f.b(d)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){f.e().then((function(e){f.c(),console.log("tfjs is ready")})).then(g).then((function(e){console.log("Test model is loaded"),setInterval(y,100,e)}))}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("div",{style:{position:"absolute",top:"0px",zIndex:"9999"},children:Object(h.jsx)("canvas",{id:"myCanvas",width:u,height:j,style:{backgroundColor:"transparent"}})}),Object(h.jsx)("div",{style:{position:"absolute",top:"0px"},children:Object(h.jsx)(b.a,{audio:!1,id:"img",ref:e,screenshotQuality:1,screenshotFormat:"image/jpeg",videoConstraints:v})})]})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(x,{})}),document.getElementById("root")),j()}},[[314,1,2]]]);
//# sourceMappingURL=main.2e74246c.chunk.js.map